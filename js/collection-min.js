jQuery(function($){function t(e){for(var t={},o=e.split("&"),l=0;l<o.length;l++){var i=o[l].split("="),n=i[0].split("filter_");n=n[n.length-1];var a=i[i.length-1].replace("%2C",",").split(",");t[n]=a}return t}function o(t,o){var l=!1;return Object.keys(t).concat(Object.keys(o)).reduce(function(i,n){var a=!1;return c=$(t[n]).not(o[n]).get(),d=$(o[n]).not(t[n]).get(),e=c.concat(d),e.length&&e[0].length&&(!l||i.slug===n&&i.value===e[0]?l=!0:(console.log("Warning: Found more than one difference in diffObject()."),console.log(" ^ Before: ",JSON.stringify(i)),a=!0),i.slug=n,i.value=e[0],a&&console.log(" ^ After: ",JSON.stringify(i))),i},{})}function l(e,t,o){if(o=!0===o,0!==e.indexOf("filter_")&&(e="filter_"+e),!g){g=!0;var l=s.split("?");l=l[l.length-1];var i=[];if(console.log("Slug = "+e+", Value = "+t),-1!==s.indexOf("/?")){var n=l.split("&"),a=!1;if(n.length)for(var r=0;r<n.length;r++){var c=n[r].split("=");if(2==c.length){var h=c[0],u=c[1],f=u.replace("%2C",",").split(",");if(console.log('Comparing slugs "'+h+'" and "'+e+'".'),h==e){if(a=!0,o)console.log(" ^ Override: force_single. Replacing..."),f=t.length?[t]:[];else{var d=f.indexOf(t);-1!==d?(console.log("Slug found! Value found! Removing..."),f.splice(d,1)):t.length&&(console.log("Slug found! Value not found! Adding..."),f.push(t))}if(f.length){var v=f.join(",");i.push([h,v].join("="))}}else console.log('Slug not found! Maintaining "'+[h,u]+'"'),i.push([h,u].join("="))}else console.log("Warning: Invalid query var found.",n[r])}a&&n.length||!t.length||i.push(e+"="+t),s=pageURL+(i.length?"/?"+i.join("&"):"")}else s+="/?"+e+"="+t;console.log("newURL = "+s),console.log("================================"),setTimeout(function(){g=!1},100)}}function i(e){return e.preventDefault(),!1}function n(e){h||(h=!0,e.hasClass("chosen")?e.removeClass("chosen"):e.toggleClass("active"),setTimeout(function(){h=!1},100))}if($(".collection-item-container .collection-item").length){var a=$(".collection-item-container").masonry({itemSelector:".collection-item",columnWidth:300,isFitWidth:!0,gutter:20,horizontalOrder:!0});a.imagesLoaded().progress(function(){a.masonry("layout")})}$(".collectionHeight").matchHeight({byRow:!1}),$(".collection-img-wrap").matchHeight({byRow:!1}),$(".collection-col").matchHeight({byRow:!1}),$(".shop-filters-widget-area .woocommerce-widget-layered-nav-list").each(function(){var e=!1,l=[],i=0,n=$(this).find("li").length;$(this).find("li").each(function(){var e=!!$(this).hasClass("chosen"),n=$(this).find("a").attr("href")+"";if(-1!==n.indexOf("?")){var a=n.split("?");a=a[a.length-1]}else a="";if(e)var r=t(queryString),s=t(a),c=o(r,s),g=c.slug,h=c.value;else{var u=a.split("&"),f=u[u.length-1],d=f.split("="),g=d[0],h=d[d.length-1];-1!==h.indexOf(",")&&(h=h[h.length-1].replace("%2C",",").split(","),h=h[h.length-1])}0==g.indexOf("filter_")&&(g=g.substring(7)),g in colorVals&&h in colorVals[g]?(l.push(!0),i++):l.push(!1),$(this).data("attrslug",g),$(this).data("attrvalue",h)}),(i>1||i==n)&&$(this).find("li").each(function(){var e=$(this).data("attrslug"),t=$(this).data("attrvalue");if(e in colorVals&&t in colorVals[e]){var o=colorVals[e][t];$(this).addClass("color-swatch hover-tooltip-trigger");var l=$(this).find("a").html();$(this).find("a").html("").css({"background-color":o}),$(this).append('<div class="hover-tooltip">'+l+"</div>")}})}),$(".shop-filters-widget-area .woocommerce-widget-layered-nav-dropdown").each(function(){});var r=pageURL+(queryString.length?"/?"+queryString:"");console.log("Original URL: "+r),console.log("================================");var s=r,g=!1;$("#wheel_filter_apply").click(function(){s!==r?(console.log("================================"),window.location=s):$(this).closest(".modal").modal("toggle")}),$(".shop-filters-widget-area form.woocommerce-widget-layered-nav-dropdown").submit(function(e){return i(e)});var h=!1;$(".shop-filters-widget-area ul.woocommerce-widget-layered-nav-list li").click(function(e){var t=$(this);n(t),l(t.data("attrslug"),t.data("attrvalue"))}),$(".shop-filters-widget-area ul.woocommerce-widget-layered-nav-list li a").click(function(e){var t=$(this).closest("li");return n(t),l(t.data("attrslug"),t.data("attrvalue")),i(e)}),$(".shop-filters-widget-area form.woocommerce-widget-layered-nav-dropdown select").change(function(){l($(this).closest("form").find("input[name^='filter_']").attr("name"),$(this).val(),!0)})});